<div class="panel panel-default">
    <div class="panel-heading">
        <h3 class="panel-title">Kysymys: {{subtask.multichoice.question}}</h3>
    </div>
    <div class="panel-body">

        {{options}}


        <!--
                <%= form_tag("/multichoices/" + subtask.multichoice.id.to_s + "/check_answers", method: "post") do %>
        -->
        <form>
            <table class = "width100">

                <tr ng-repeat="option in options">
                    <td class = "multichoice" >
                        <!--
                                    <% if @multichoice_checked_options.to_a.include? option.id.to_s %>
                                      <% if option.is_correct_answer == "required" %>
                                        correct-answer
                                      <% elsif option.is_correct_answer == "allowed" %>
                                        allowed-answer
                                      <% elsif option.is_correct_answer == "wrong" %>
                                        wrong-answer
                        -->

                        <input type="checkbox" ng-model="option.checked" value="option.id" id="option_{{option.id}}">
                        <!--              <%= label_tag "checked_options_" + option.id.to_s do %>
                                          <% if subtask.multichoice.is_radio_button %>
                                              <% if @multichoice_checked_options.to_a.include? option.id.to_s and option.is_correct_answer != "wrong" %>
                                                  <%= radio_button_tag 'checked_options[]', option.id, nil, id: "checked_options_" + option.id.to_s, :checked => true %>
                                              <% else %>
                                                  <%= radio_button_tag 'checked_options[]', option.id, nil, id: "checked_options_" + option.id.to_s %>
                                              <% end %>

                                          <% else %>
                                              <% if @multichoice_checked_options.to_a.include? option.id.to_s and option.is_correct_answer != "wrong" %>
                                                  <%= check_box_tag 'checked_options[]', option.id, nil, id: "checked_options_" + option.id.to_s, :checked => true %>
                                              <% else %>
                                                  <%= check_box_tag 'checked_options[]', option.id, nil, id: "checked_options_" + option.id.to_s %>
                                              <% end %>
                                          <% end %>-->
                        <label for="option_{{option.id}}">{{option.content}}</label>


                    </td>
                    <td class = "multichoice" ta-bind="text" ng-model="option.explanation">
                        <!--            <% if @multichoice_checked_options.to_a.include? option.id.to_s %>
                                      <% if option.is_correct_answer == "required" %>
                                        correct-answer
                                      <% elsif option.is_correct_answer == "allowed" %>
                                        allowed-answer
                                      <% elsif option.is_correct_answer == "wrong" %>
                                        wrong-answer-->
                    </td>
                </tr>

            </table>
            <br />

            <input type="submit" ng-click="checkAnswers()" class="btn btn-default btn-save widthAuto" value="Tarkista" ng-if="!currentUserAdmin">

        </form>
    </div>
</div>